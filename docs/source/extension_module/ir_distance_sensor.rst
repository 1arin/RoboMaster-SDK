================
紅外深度傳感器
================

介紹
----------

紅外深度傳感器的設計是基於飛行時間 TOF (Time of Flight) 原理，即傳感器發出經調製的近紅外光，遇物體後反射，傳感器通過計算光線發射和反射時間差或相位差，來計算距離物體的距離。

產品特性
----------

紅外深度傳感器的探測面積見下圖：

.. image:: ../images/tof.png

其發出的是一個角度為 20° 的圓錐光，這個光斑 D 與距離 Dist 的關係：

    **D=2×Dist×tan⁡(10)**

要實現最佳測試效果，應保證目標物的尺寸要至少等於 TOF 光斑的尺寸。
 
.. tip:: 如果目標物小於光斑大小，那麼應保證目標物盡量在光斑的中心位置，因為光斑內的光強分佈並不是均勻的，而是呈一個類高斯分佈，中間光強大，四周光強小，為了保證返回光能量足夠，應盡量保證目標物在光斑中心。


引腳說明
----------

.. image:: ../images/tof_module.png
	:scale: 40%

這裡介紹紅外深度傳感器的UART口：

====== ======= ====== ===========
編號    引腳    功能   對應連接項
====== ======= ====== ===========
1	VCC	供電	電源正極
2	GND	供電	電源地
3	TX	發送	RX
4	RX	接收	TX
====== ======= ====== ===========

通訊協議和數據格式
-------------------

========= ====== ====== ====== ==========
通訊接口  波特率 數據位 停止位  奇偶校驗
========= ====== ====== ====== ==========
UART      115200   8      1     none
========= ====== ====== ====== ==========

控制命令輸入:

.. data:: ir_distance_sensor_measure_on

	:描述: 打開紅外深度傳感器數據輸出，輸出頻率為20 Hz
	

.. data:: ir_distance_sensor_measure_off

	:描述: 關閉紅外深度傳感器數據輸出
	

數據輸出:

.. data:: ir distance:xxx

	:描述: 紅外深度傳感器數據格式
	
.. tip:: 命令格式都以字符串形式輸入和輸出

Python API
--------------------------

請參考 :doc:`紅外深度傳感器<../python/ir_distance_sensor>`
