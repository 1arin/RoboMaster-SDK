================
拓展模組使用說明
================

紅外深度感測器
--------------
1.介紹：

紅外深度感測器的設計是基於 TOF(Time of Flight) 即飛行時間原理。即感測器發出經調製的近紅外光，遇物體後反射，感測器通過計算光線發射和反射時間差或相位差，來計算距離物體的距離。

2.產品特性

紅外深度感測器的探測面積見下圖，

.. image:: ../images/tof.png

其發出的是一個角度為 20° 的圓錐光，這個光斑 D 與距離 Dist 的關係：

    **D=2×Dist×tan⁡(10)**

要實現最佳測試效果，應保證目標物的尺寸要至少等於 TOF 光斑的尺寸。
 
.. tip:: 如果目標物小於光斑大小，那麼應保證目標物盡量在光斑的中心位置，因為光斑內的光強分佈並不是均勻的，而是呈一個類高斯分佈，中間光強大，四周光強小，為了保證返回光能量足夠，應儘量保證目標物在光斑中心。


3.引腳說明

====== ======= ====== ===========
編號    引腳    功能   對應連接項
====== ======= ====== ===========
1	VCC	供電	電源正極
2	GND	供電	電源地
3	TX	接收	RX
4	RX	發送	TX
====== ======= ====== ===========

4.通訊協定和資料格式

========= ========== ======== ====== ==========
通訊接口   傳送速率  數據位元 停止位  奇偶校驗
========= ========== ======== ====== ==========
UART      115200     8        1      none
========= ========== ======== ====== ==========

控制命令輸入:

.. data:: ir_distance_sensor_measure_on

	:描述: 開啟紅外深度感測器數據輸出
	

.. data:: ir_distance_sensor_measure_off

	:描述: 關閉紅外深度感測器數據輸出
	

數據輸出:

.. data:: ir distance:xxx

	:描述: 紅外深度感測器數據格式
	
.. tip:: 命令格式都以字符串形式輸入和輸出

舵機
--------
1.介绍

舵機的油門控制方式除了支援 485 控制，還可以進行 PWM 控制，控制模式包含：速度模式和角度模式。

.. note:: 舵機的控制模式

    舵機的控制模式需要通過官方的編程接口（　Scratch / Python ）進行切換，並且會存儲在舵機內部，不會隨着舵機下電而重置。使用　ＰＷＭ　控制前請確認舵機當前的控制模式

2.引腳說明

舵機上的 485 管腳和 PWM 管腳重複使用，如下圖所示

.. image:: ../images/servo.png


3.控制說明

在 PWM 控制方式下，舵機對應的輸入輸出

+----------+------------+------------+------------------+   
| 控制模式 | 脈衝週期   |  油門範圍  |    舵機輸出      |   
+==========+============+============+==================+   
| 角度模式 |    50Hz    | 2.5%~12.5% |     0°~360°      |   
+----------+------------+------------+------------------+   
|          |            | 2.5%~7.5%  |49rpm~0rpm,順時針 |   
| 速度模式 |    50hz    +------------+------------------+   
|          |            | 7.5%~12.5% |0rpm~—49rpm,逆時針|   
+----------+------------+------------+------------------+ 